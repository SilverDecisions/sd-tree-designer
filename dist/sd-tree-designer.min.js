require=function e(t,n,i){function o(r,l){if(!n[r]){if(!t[r]){var s="function"==typeof require&&require;if(!l&&s)return s(r,!0);if(a)return a(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){var n=t[r][1][e];return o(n||e)},u,u.exports,e,t,n,i)}return n[r].exports}for(var a="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.AppUtils=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./d3")),r=e("./templates"),l=e("./i18n/i18n"),s=e("sd-utils"),d=function(){function e(){i(this,e)}return o(e,null,[{key:"placeTextWithEllipsis",value:function(e,t,n){var i=e.node();i.textContent=t;if(i.getComputedTextLength()>n+0){for(var o=t.length-3;o>0;o-=1)if(i.getSubStringLength(0,o)+9<=n+0)return i.textContent=t.substring(0,o)+"...",!0;return i.textContent="...",!0}return!1}},{key:"placeTextWithEllipsisAndTooltip",value:function(t,n,i,o){e.placeTextWithEllipsis(t,n,i)&&o&&(t.on("mouseover",function(e){o.transition().duration(200).style("opacity",.9),o.html(n).style("left",a.event.pageX+5+"px").style("top",a.event.pageY-28+"px")}),t.on("mouseout",function(e){o.transition().duration(500).style("opacity",0)}))}},{key:"getFontSize",value:function(e){return window.getComputedStyle(e,null).getPropertyValue("font-size")}},{key:"getTranslation",value:function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","g");t.setAttributeNS(null,"transform",e);var n=t.transform.baseVal.consolidate().matrix;return[n.e,n.f]}},{key:"closestPoint",value:function(e,t){function n(e){var n=e.x-t[0],i=e.y-t[1];return n*n+i*i}for(var i,o,a,r,l=e.getTotalLength(),s=8,d=1/0,u=0;u<=l;u+=s)(r=n(a=e.getPointAtLength(u)))<d&&(i=a,o=u,d=r);for(s/=2;s>.5;){var c,f,h,p,g,y;(h=o-s)>=0&&(g=n(c=e.getPointAtLength(h)))<d?(i=c,o=h,d=g):(p=o+s)<=l&&(y=n(f=e.getPointAtLength(p)))<d?(i=f,o=p,d=y):s/=2}return i=[i.x,i.y],i.distance=Math.sqrt(d),i}},{key:"growl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3,o=r.Templates.get("growl",{message:e,type:t}),l=a.select("body").selectOrAppend("div.sd-growl-list."+n).append("div").html(o);setTimeout(function(){l.remove()},i)}},{key:"createElement",value:function(t,n,i){var o=document.createElement(t);return n&&e.deepExtend(o,n),i&&i.appendChild(o),o}},{key:"removeElement",value:function(e){e.parentNode.removeChild(e)}},{key:"replaceUrls",value:function(e){if(!e)return e;return e.replace(/((ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?)/,'<a href="$1" target="_blank">$1</a>')}},{key:"escapeHtml",value:function(e){var t=document.createTextNode(e),n=document.createElement("div");return n.appendChild(t),n.innerHTML}},{key:"dispatchHtmlEvent",value:function(e,t){if("createEvent"in document){var n=document.createEvent("HTMLEvents");n.initEvent(t,!1,!0),e.dispatchEvent(n)}else e.fireEvent("on"+t)}},{key:"dispatchEvent",value:function(e,t){var n;try{n=new CustomEvent(e,{detail:t})}catch(i){(n=document.createEvent("CustomEvent")).initCustomEvent(e,!1,!1,t)}document.dispatchEvent(n)}},{key:"getValidationMessage",value:function(e){s.Utils.isString(e)&&(e={name:e});var t="validation."+e.name;return l.i18n.t(t,e.data)}},{key:"hide",value:function(e){e.classed("sd-hidden",!0)}},{key:"show",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.classed("sd-hidden",!t)}},{key:"isHidden",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!e||(t?"none"===window.getComputedStyle(e).display:null===e.offsetParent)}}]),e}();n.AppUtils=d,d.sanitizeHeight=function(e,t){return e||parseInt(t.style("height"),10)||400},d.sanitizeWidth=function(e,t){return e||parseInt(t.style("width"),10)||960},d.availableHeight=function(e,t,n){return Math.max(0,d.sanitizeHeight(e,t)-n.top-n.bottom)},d.availableWidth=function(e,t,n){return Math.max(0,d.sanitizeWidth(e,t)-n.left-n.right)}},{"./d3":8,"./i18n/i18n":12,"./templates":20,"sd-utils":"sd-utils"}],2:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.ContextMenu=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../d3"));n.ContextMenu=function(){function e(t,n){i(this,e);var o=this;return"function"==typeof n?o.openCallback=n:(n=n||{},o.openCallback=n.onOpen,o.closeCallback=n.onClose),a.selectAll(".d3-context-menu").data([1]).enter().append("div").attr("class","d3-context-menu"),a.select("body").on("click.d3-context-menu",function(){a.select(".d3-context-menu").style("display","none"),o.closeCallback&&o.closeCallback()}),function(e,n){var i=this;a.selectAll(".d3-context-menu").html(""),a.selectAll(".d3-context-menu").on("contextmenu",function(e){a.select(".d3-context-menu").style("display","none"),a.event.preventDefault(),a.event.stopPropagation()}).append("ul").selectAll("li").data("function"==typeof t?t(e):t).enter().append("li").attr("class",function(e){var t="";return e.divider&&(t+=" is-divider"),e.disabled&&(t+=" is-disabled"),e.action||(t+=" is-header"),t}).html(function(t){return t.divider?"<hr>":(t.title||console.error("No title attribute set. Check the spelling of your options."),"string"==typeof t.title?t.title:t.title(e))}).on("click",function(t,r){t.disabled||t.action&&(t.action(i,e,n),a.select(".d3-context-menu").style("display","none"),o.closeCallback&&o.closeCallback())}),o.openCallback&&!1===o.openCallback(e,n)||(a.select(".d3-context-menu").style("left",a.event.pageX-2+"px").style("top",a.event.pageY-2+"px").style("display","block"),a.event.preventDefault(),a.event.stopPropagation())}}return o(e,null,[{key:"hide",value:function(){a.select(".d3-context-menu").style("display","none")}}]),e}()},{"../d3":8}],3:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.EdgeContextMenu=void 0;var l=e("./context-menu"),s=e("../i18n/i18n");n.EdgeContextMenu=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(t){var n=[];return n.push({title:s.i18n.t("contextMenu.edge.injectDecisionNode"),action:function(t,n,i){e.injectDecisionNode(n)}}),n.push({title:s.i18n.t("contextMenu.edge.injectChanceNode"),action:function(t,n,i){e.injectChanceNode(n)}}),n}));return n.treeDesigner=e,n}return a(t,l.ContextMenu),t}()},{"../i18n/i18n":12,"./context-menu":2}],4:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.MainContextMenu=void 0;var l=e("./context-menu"),s=e("sd-model"),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../d3")),u=e("../i18n/i18n");n.MainContextMenu=function(e){function t(e){i(this,t);var n=null,a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(t){var i=[];return i.push({title:u.i18n.t("contextMenu.main.addDecisionNode"),action:function(t,i,o){var a=new s.domain.DecisionNode(n);e.addNode(a)}}),i.push({title:u.i18n.t("contextMenu.main.addChanceNode"),action:function(t,i,o){var a=new s.domain.ChanceNode(n);e.addNode(a)}}),i.push({divider:!0}),i.push({title:u.i18n.t("contextMenu.main.addText"),action:function(t,i,o){var a=new s.domain.Text(n);e.addText(a)}}),i.push({divider:!0}),i.push({title:u.i18n.t("contextMenu.main.paste"),action:function(t,i,o){e.pasteToNewLocation(n)},disabled:!e.copiedNodes||!e.copiedNodes.length}),i.push({divider:!0}),i.push({title:u.i18n.t("contextMenu.main.selectAllNodes"),action:function(t,n,i){e.selectAllNodes()}}),i},{onOpen:function(){e.clearSelection(),n=new s.domain.Point(d.mouse(e.svg.node())).move(e.getMainGroupTranslation(!0))}}));return a.treeDesigner=e,a}return a(t,l.ContextMenu),t}()},{"../d3":8,"../i18n/i18n":12,"./context-menu":2,"sd-model":"sd-model"}],5:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.NodeContextMenu=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("./context-menu"),d=e("sd-model"),u=e("../i18n/i18n");n.NodeContextMenu=function(e){function t(e,n){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(i){var o={title:u.i18n.t("contextMenu.node.copy"),action:function(t,n,i){e.selectNode(n,!e.isNodeSelected(n)),e.copySelectedNodes()}},a={title:u.i18n.t("contextMenu.node.cut"),action:function(t,n,i){e.selectNode(n,!e.isNodeSelected(n)),e.cutSelectedNodes()}},r={title:u.i18n.t("contextMenu.node.paste"),action:function(t,n,i){e.pasteToNode(n)},disabled:i.folded||!e.copiedNodes||!e.copiedNodes.length},l={title:u.i18n.t("contextMenu.node.delete"),action:function(t,n,i){e.selectNode(n,!e.isNodeSelected(n)),e.removeSelectedNodes()}},s=[];if(i.type==d.domain.TerminalNode.$TYPE)return s=[o,a,l],t.addNodeConversionOptions(i,s,e),s;if(i.folded||(s.push({title:u.i18n.t("contextMenu.node.addDecisionNode"),action:function(t,n,i){e.addDecisionNode(n)}}),s.push({title:u.i18n.t("contextMenu.node.addChanceNode"),action:function(t,n,i){e.addChanceNode(n)}}),s.push({title:u.i18n.t("contextMenu.node.addTerminalNode"),action:function(t,n,i){e.addTerminalNode(n)}}),s.push({divider:!0})),s.push(o),s.push(a),s.push(r),s.push(l),t.addNodeConversionOptions(i,s,e),s.push({divider:!0}),s.push({title:u.i18n.t("contextMenu.node.selectSubtree"),action:function(t,n,i){e.selectSubTree(n,!0)}}),i.folded?s.push({title:u.i18n.t("contextMenu.node.unfold"),action:function(t,n,i){e.foldSubtree(n,!1)}}):s.push({title:u.i18n.t("contextMenu.node.fold"),action:function(t,n,i){e.foldSubtree(n)}}),n){var c=n(i);c.length&&(s.push({divider:!0}),c.forEach(function(t){s.push({title:u.i18n.t("contextMenu.node."+t.name),action:function(n,i,o){e.performOperation(i,t)},disabled:!t.canPerform(i)})}))}return s}));return a.treeDesigner=e,a}return a(t,s.ContextMenu),l(t,null,[{key:"addNodeConversionOptions",value:function(e,n,i){var o=t.getNodeConversionOptions(e,i);o.length&&(n.push({divider:!0}),o.forEach(function(e){return n.push(e)}))}},{key:"getNodeConversionOptions",value:function(e,n){var i=[],o=[d.domain.DecisionNode.$TYPE,d.domain.ChanceNode.$TYPE,d.domain.TerminalNode.$TYPE];return!e.childEdges.length&&e.$parent?o.filter(function(t){return t!==e.type}).forEach(function(e){i.push(t.getNodeConversionOption(e,n))}):e instanceof d.domain.DecisionNode?i.push(t.getNodeConversionOption(d.domain.ChanceNode.$TYPE,n)):i.push(t.getNodeConversionOption(d.domain.DecisionNode.$TYPE,n)),i}},{key:"getNodeConversionOption",value:function(e,t){return{title:u.i18n.t("contextMenu.node.convert."+e),action:function(n,i,o){t.convertNode(i,e)}}}}]),t}()},{"../i18n/i18n":12,"./context-menu":2,"sd-model":"sd-model"}],6:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.TextContextMenu=void 0;var l=e("./context-menu"),s=e("../i18n/i18n");n.TextContextMenu=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(t){var n={title:s.i18n.t("contextMenu.text.delete"),action:function(t,n,i){e.selectText(n,!0,!0),e.removeSelectedTexts()}},i=[];return i.push(n),i}));return n.treeDesigner=e,n}return a(t,l.ContextMenu),t}()},{"../i18n/i18n":12,"./context-menu":2}],7:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.D3Extensions=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./d3"));n.D3Extensions=function(){function e(){i(this,e)}return o(e,null,[{key:"extend",value:function(){a.selection.prototype.enter.prototype.insertSelector=a.selection.prototype.insertSelector=function(t,n){return e.insertSelector(this,t,n)},a.selection.prototype.enter.prototype.appendSelector=a.selection.prototype.appendSelector=function(t){return e.appendSelector(this,t)},a.selection.prototype.enter.prototype.selectOrAppend=a.selection.prototype.selectOrAppend=function(t){return e.selectOrAppend(this,t)},a.selection.prototype.enter.prototype.selectOrInsert=a.selection.prototype.selectOrInsert=function(t,n){return e.selectOrInsert(this,t,n)}}},{key:"insertOrAppendSelector",value:function(e,t,n,i){for(var o=t.split(/([\.\#])/),a=e[n](o.shift(),i);o.length>1;){var r=o.shift(),l=o.shift();"."===r?a=a.classed(l,!0):"#"===r&&(a=a.attr("id",l))}return a}},{key:"insertSelector",value:function(t,n,i){return e.insertOrAppendSelector(t,n,"insert",i)}},{key:"appendSelector",value:function(t,n){return e.insertOrAppendSelector(t,n,"append")}},{key:"selectOrAppend",value:function(t,n,i){var o=t.select(n);return o.empty()?i?t.append(i):e.appendSelector(t,n):o}},{key:"selectOrInsert",value:function(t,n,i){var o=t.select(n);return o.empty()?e.insertSelector(t,n,i):o}}]),e}()},{"./d3":8}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("d3-dispatch");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var o=e("d3-scale");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var a=e("d3-selection");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})});var r=e("d3-shape");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var l=e("d3-drag");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return l[e]}})});var s=e("d3-brush");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}})});var d=e("d3-array");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return d[e]}})});var u=e("d3-hierarchy");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return u[e]}})});var c=e("d3-time-format");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return c[e]}})})},{"d3-array":"d3-array","d3-brush":"d3-brush","d3-dispatch":"d3-dispatch","d3-drag":"d3-drag","d3-hierarchy":"d3-hierarchy","d3-scale":"d3-scale","d3-selection":"d3-selection","d3-shape":"d3-shape","d3-time-format":"d3-time-format"}],9:[function(e,t,n){t.exports={contextMenu:{main:{addDecisionNode:"Entscheidungsknoten hinzufügen",addChanceNode:"Zufall Knoten hinzufügen",addText:"Text hinzufügen ",paste:"Einfügen",selectAllNodes:"Alle Knoten auswählen"},node:{copy:"Kopieren",cut:"Ausschneiden",paste:"Einfügen",delete:"Löschen",addDecisionNode:"Entscheidungsknoten hinzufügen",addChanceNode:"Zufall Knoten hinzufügen",addTerminalNode:"Endknotten hinzufügen",convert:{decision:"Als Entscheidungsknoten",chance:"Als Zufall Knoten",terminal:"Als Endknoten"},selectSubtree:"Teilbaum wählen",fold:"Teilbaum falten",unfold:"Teilbaum entfalten",flipSubtree:"Teilbaum umdrehen"},edge:{injectDecisionNode:"Entscheidungsknoten Injizieren",injectChanceNode:"Zufall Knoten Injizieren"},text:{delete:"Löschen"}},validation:{incompletePath:"Pfad, der nicht mit dem Endknoten endet",probabilityDoNotSumUpTo1:"Die Summe der Wahrscheinlichkeiten ist nicht gleich 1",invalidProbability:"Ungültige Wahrscheinlichkeit im Zweig #{{number}}",invalidPayoff:"Ungültige Auszahlung in Zweig #{{number}}"},growl:{brushDisabled:"Auswahlbürste deaktiviert",brushEnabled:"Auswahlbürste aktiviert"},tooltip:{node:{payoff:{default:"Auszahlung {{number}}",named:"{{name}}"},aggregatedPayoff:{default:"Aggregierte Auszahlung {{number}}",named:"Aggregierte {{name}}"},probabilityToEnter:"Wahrscheinlichkeit"},edge:{payoff:{default:"Auszahlung {{number}}: {{value}}",named:"{{name}}: {{value}}"},probability:"Wahrscheinlichkeit: {{value}}"}}}},{}],10:[function(e,t,n){t.exports={contextMenu:{main:{addDecisionNode:"Add Decision Node",addChanceNode:"Add Chance Node",addText:"Add Text",paste:"Paste",selectAllNodes:"Select all nodes"},node:{copy:"Copy",cut:"Cut",paste:"Paste",delete:"Delete",addDecisionNode:"Add Decision Node",addChanceNode:"Add Chance Node",addTerminalNode:"Add Terminal Node",convert:{decision:"As Decision Node",chance:"As Chance Node",terminal:"As Terminal Node"},selectSubtree:"Select subtree",fold:"Fold subtree",unfold:"Unfold subtree",flipSubtree:"Flip subtree"},edge:{injectDecisionNode:"Inject Decision Node",injectChanceNode:"Inject Chance Node"},text:{delete:"Delete"}},validation:{incompletePath:"Path not ending with terminal node",probabilityDoNotSumUpTo1:"Probabilities do not sum up to 1",invalidProbability:"Invalid probability in edge #{{number}}",invalidPayoff:"Invalid payoff in edge #{{number}}"},growl:{brushDisabled:"Selection brush disabled",brushEnabled:"Selection brush enabled"},tooltip:{node:{payoff:{default:"Payoff {{number}}",named:"{{name}}"},aggregatedPayoff:{default:"Aggregated Payoff {{number}}",named:"Aggregated {{name}}"},probabilityToEnter:"Probability to enter"},edge:{payoff:{default:"Payoff {{number}}: {{value}}",named:"{{name}}: {{value}}"},probability:"Probability: {{value}}"}}}},{}],11:[function(e,t,n){t.exports={contextMenu:{main:{addDecisionNode:"Ajouter noud de décision",addChanceNode:"Ajouter noud aléatoire",addText:"Ajouter du texte",paste:"Coller",selectAllNodes:"Sélectionner tous les nouds"},node:{copy:"Copie",cut:"Couper",paste:"Coller",delete:"Effacer",addDecisionNode:"Ajouter noud de décision",addChanceNode:"Ajouter noud aléatoire",addTerminalNode:"Ajouter un noeud terminal",convert:{decision:"Comme noud de décision",chance:"Comme noud aléatoire",terminal:"Comme un noeud terminal"},selectSubtree:"Sélectionner une sous-arborescence",fold:"Plier sous-arbre",unfold:"Déplier arbre sous-arbre",flipSubtree:"Basculer sous-arbre"},edge:{injectDecisionNode:"Injecter un noeud de décision",injectChanceNode:"Injecter un noeud de chance"},text:{delete:"Effacer"}},validation:{incompletePath:"Parcours non terminé par noeud terminal",probabilityDoNotSumUpTo1:"La somme des probabilités n'est pas 1 ou plus",invalidProbability:"Probabilité invalide - le bord #{{number}}",invalidPayoff:"Avantage invalide - le bord #{{number}}"},growl:{brushDisabled:"Brosse de sélection désactivée",brushEnabled:"Brosse de sélection activée"},tooltip:{node:{payoff:{default:"Avantage {{number}}",named:"{{name}}"},aggregatedPayoff:{default:"Avantage agrégé {{number}}",named:"Agrégé  {{name}}"},probabilityToEnter:"Probabilité d'entrée"},edge:{payoff:{default:"Avantage {{number}}: {{value}}",named:"{{name}}: {{value}}"},probability:"Probabilité: {{value}}"}}}},{}],12:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.i18n=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(e){return e&&e.__esModule?e:{default:e}}(e("i18next")),l=i(e("./en.json")),s=i(e("./pl.json")),d=i(e("./it.json")),u=i(e("./de.json")),c=i(e("./fr.json"));n.i18n=function(){function e(){o(this,e)}return a(e,null,[{key:"init",value:function(t){e.language=t;var n={en:{translation:l},pl:{translation:s},it:{translation:d},de:{translation:u},fr:{translation:c}};e.$instance=r.default.createInstance({lng:t,fallbackLng:"en",resources:n},function(e,t){})}},{key:"t",value:function(t,n){return e.$instance.t(t,n)}}]),e}()},{"./de.json":9,"./en.json":10,"./fr.json":11,"./it.json":13,"./pl.json":14,i18next:"i18next"}],13:[function(e,t,n){t.exports={contextMenu:{main:{addDecisionNode:"Aggiungi un nodo di decisione",addChanceNode:"Aggiungi un nodo opportunità",addText:"Aggiungi testo",paste:"Incolla",selectAllNodes:"Seleziona tutti i nodi"},node:{copy:"Copia",cut:"Taglia",paste:"Incolla",delete:"Cancella",addDecisionNode:"Aggiungi un nodo di decisione",addChanceNode:"Aggiungi un nodo opportunità",addTerminalNode:"Aggiungi un nodo terminale",convert:{decision:"Come Decision Node",chance:"Come Chance Node",terminal:"Come Terminal Node"},selectSubtree:"Seleziona Sotto-albero",fold:"Piega sotto-albero",unfold:"Dispiegarsi sotto-albero",flipSubtree:"Ribalta sotto-albero"},edge:{injectDecisionNode:"Inietta nodo di decisione",injectChanceNode:"Inietta nodo opportunità"},text:{delete:"Cancella"}},validation:{incompletePath:"Percorso senza nodo terminale",probabilityDoNotSumUpTo1:"La somma delle probabilità è diversa da 1",invalidProbability:"Probabilità non valida - bordo #{{number}}",invalidPayoff:"Saldo non valido - bordo #{{number}}"},growl:{brushDisabled:"Selezione pennello disabilitata",brushEnabled:"Selezione pennello abilitata"},tooltip:{node:{payoff:{default:"Saldo {{number}}",named:"{{name}}"},aggregatedPayoff:{default:"Saldo aggregato {{number}}",named:"Aggregato {{name}}"},probabilityToEnter:"Probabilità da inserire"},edge:{payoff:{default:"Saldo {{number}}: {{value}}",named:"{{name}}: {{value}}"},probability:"Probabilità: {{value}}"}}}},{}],14:[function(e,t,n){t.exports={contextMenu:{main:{addDecisionNode:"Dodaj Węzeł Decyzyjny",addChanceNode:"Dodaj Węzeł Losowy",addText:"Dodaj Tekst",paste:"Wklej",selectAllNodes:"Zaznacz wszystkie węzły"},node:{copy:"Kopiuj",cut:"Wytnij",paste:"Wklej",delete:"Usuń",addDecisionNode:"Dodaj Węzeł Decyzyjny",addChanceNode:"Dodaj Węzeł Losowy",addTerminalNode:"Dodaj Węzeł Końcowy",convert:{decision:"Jako Węzeł Decyzyjny",chance:"Jako Węzeł Losowy",terminal:"Jako Węzeł Końcowy"},selectSubtree:"Zaznacz poddrzewo",fold:"Zwiń poddrzewo",unfold:"Rozwiń poddrzewo",flipSubtree:"Przewróć poddrzewo"},edge:{injectDecisionNode:"Wstrzyknij Węzeł Decyzyjny",injectChanceNode:"Wstrzyknij Węzeł Losowy"},text:{delete:"Usuń"}},validation:{incompletePath:"Ostatnim węzłem w ścieżce powinien być Węzeł Końcowy",probabilityDoNotSumUpTo1:"Prawdopodobieństwa nie sumują sie do 1",invalidProbability:"Niepoprawne prawdopodobieństwo na krawędzi #{{number}}",invalidPayoff:"Niepoprawna wypłata na krawędzi #{{number}}"},growl:{brushDisabled:"Zaznaczanie wyłączone",brushEnabled:"Zaznaczanie włączone"},tooltip:{node:{payoff:{default:"Wypłata {{number}}",named:"{{name}}"},aggregatedPayoff:{default:"Zagregowana wypłata {{number}}",named:"Zagregowana {{name}}"},probabilityToEnter:"Prawdopodobieństwo wejścia"},edge:{payoff:{default:"Wypłata {{number}}: {{value}}",named:"{{name}}: {{value}}"},probability:"Prawdopodobieństwo: {{value}}"}}}},{}],15:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.d3=void 0;var o=e("./tree-designer");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var a=e("./app-utils");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})});var r=e("./templates");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var l=e("./tooltip");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return l[e]}})});var s=e("./d3-extensions");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}})});var d=e("./d3");Object.defineProperty(n,"d3",{enumerable:!0,get:function(){return i(d).default}}),s.D3Extensions.extend()},{"./app-utils":1,"./d3":8,"./d3-extensions":7,"./templates":20,"./tooltip":23,"./tree-designer":24}],16:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Layout=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=e("sd-utils"),l=e("sd-model"),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./d3")),d=i(e("./symbols/circle")),u=i(e("./symbols/triangle")),c=e("./app-utils");(n.Layout=function(){function e(t,n,i){o(this,e),this.nodeTypeToSymbol={decision:s.symbolSquare,chance:d.default,terminal:u.default},this.onAutoLayoutChanged=[],this.nodeTypeOrder={decision:0,chance:0,terminal:1},this.treeMargin=50,this.targetSymbolSize={},this.nodeSeparation=function(e,t){return e.parent===t.parent?1:1.2},this.nodeSymbolSize={},this.treeDesigner=t,this.data=n,this.config=i}return a(e,[{key:"update",value:function(e){if(e&&e.$parent&&e.$parent.childEdges.sort(function(e,t){return e.childNode.location.y-t.childNode.location.y}),!this.isManualLayout())return this.autoLayout(this.config.type,!0);e?this.moveNodeToEmptyPlace(e):this.treeDesigner.redraw(!0)}},{key:"isManualLayout",value:function(){return this.config.type===e.MANUAL_LAYOUT_NAME}},{key:"getNewChildLocation",value:function(e){if(!e)return new l.domain.Point(this.getNodeMinX(),this.getNodeMinY());var t=e.location.x+this.config.gridWidth,n=e.location.y;return e.childEdges.length&&(n=e.childEdges[e.childEdges.length-1].childNode.location.y+1),new l.domain.Point(t,n)}},{key:"getInjectedNodeLocation",value:function(e){var t=e.$linePoints[2];return new l.domain.Point(t[0],t[1])}},{key:"moveNodeToEmptyPlace",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this;e.location.x=Math.max(this.getNodeMinX(e),e.location.x),e.location.y=Math.max(this.getNodeMinY(e),e.location.y),this.nodesSortedByX=this.data.nodes.slice(),this.nodesSortedByX.sort(function(e,t){return e.location.x-t.location.x});for(var i,o=this.config.nodeSize/2,a=this.config.nodeSize+10,s=!1,d=new l.domain.Point(e.location);i=function(e,t){return r.Utils.find(n.nodesSortedByX,function(i){if(e==i)return!1;var o=n.config.nodeSize/3,a=i.location.x,r=i.location.y;return t.x-o<=a&&t.x+o>=a&&t.y-o<=r&&t.y+o>=r})}(e,d);)s=!0,e.$parent&&i.$parent&&e.$parent===i.$parent?d.move(0,75):d.move(o,a);s&&(e.moveTo(d.x,d.y,!0),t&&this.treeDesigner.redraw(!0))}},{key:"disableAutoLayout",value:function(){this.config.type=e.MANUAL_LAYOUT_NAME,this._fireOnAutoLayoutChangedCallbacks()}},{key:"drawNodeSymbol",value:function(e,t){var n=this,i=this.config.nodeSize;this.nodeSymbol=s.symbol().type(function(e){return n.nodeTypeToSymbol[e.type]}).size(function(e){return n.nodeSymbolSize[e.$id]?r.Utils.get(n.targetSymbolSize,e.type+"['"+n.config.nodeSize+"']",64):64}),e.each(function(e){var o=s.select(this);o.attr("d")||o.attr("d",n.nodeSymbol);var a=r.Utils.get(n.targetSymbolSize,e.type+"['"+n.config.nodeSize+"']");if(!a){var l=o.node().getBBox(),d=Math.min(i/l.width,i/l.height);a=d*d*(n.nodeSymbolSize[e.$id]||64),r.Utils.set(n.targetSymbolSize,e.type+"['"+n.config.nodeSize+"']",a)}t?o=o.transition():n.nodeSymbolSize[e.$id]=a,o.attr("d",n.nodeSymbol),t&&(n.nodeSymbolSize[e.$id]=a)})}},{key:"nodeLabelPosition",value:function(e){return e.attr("x",0).attr("y",-this.config.nodeSize/2-7)}},{key:"nodePayoffPosition",value:function(t){return e.setHangingPosition(t).attr("x",0).attr("y",this.config.nodeSize/2+7).attr("text-anchor","middle")}},{key:"nodeAggregatedPayoffPosition",value:function(t){var n=this,i=this.config.nodeSize/2+7;return e.setHangingPosition(t).attr("x",i).attr("y",function(e){var t=e.displayValue("aggregatedPayoff"),i=r.Utils.isArray(t)?t.filter(function(e){return void 0!==e}).length:1;return-Math.max(12*i+i>1?0:5,n.config.nodeSize/2)+(i>1?2:5)}),t.selectAll("tspan").attr("x",i),t}},{key:"nodeProbabilityToEnterPosition",value:function(e){return e.attr("x",this.config.nodeSize/2+7).attr("y",Math.max(17,this.config.nodeSize/2)-5)}},{key:"nodeIndicatorPosition",value:function(e){return e.attr("x",this.config.nodeSize/2+8).attr("y",-this.config.nodeSize/2).attr("dominant-baseline","central").attr("text-anchor","middle")}},{key:"nodeUnfoldButtonPosition",value:function(e){return e.attr("x",this.config.nodeSize/2+5).attr("y",0).attr("dominant-baseline","central")}},{key:"edgeLineD",value:function(e){var t=s.line().x(function(e){return e[0]}).y(function(e){return e[1]}),n=e.parentNode,i=e.childNode,o=i.location.x-n.location.x,a=(i.location.y,n.location.y,o>=0?1:-1),r=Math.min(o/2,this.config.nodeSize/2+10),l=Math.min(this.config.edgeSlantWidthMax,Math.max(o/2-r,0)),d=[n.location.x+this.config.nodeSize/2+1,n.location.y],u=[Math.max(n.location.x+r,d[0]),n.location.y],c=[n.location.x+r+l,i.location.y],f=[i.location.x-a*Math.max(0,Math.min(this.config.nodeSize/2+8,o/2)),i.location.y];return e.$linePoints=[d,u,c,f],t(e.$linePoints)}},{key:"edgePayoffPosition",value:function(t){return e.setHangingPosition(t).attr("x",function(e){return e.$linePoints[2][0]+2}).attr("y",function(e){return e.$linePoints[2][1]+7}),t.selectAll("tspan").attr("x",function(e){return s.select(this.parentNode).datum().$linePoints[2][0]+2}),t}},{key:"edgeLabelPosition",value:function(e){return e.attr("transform",function(e){return"translate("+(e.$linePoints[2][0]+2)+","+(e.$linePoints[2][1]-7)+")"})}},{key:"edgeProbabilityPosition",value:function(t){return e.setHangingPosition(t).attr("x",function(e){var t=this.getComputedTextLength(),n=e.$linePoints[2][0]+2+this.previousSibling.childNodes[0].getComputedTextLength()+7+t;return Math.max(n,e.$linePoints[3][0]-8)}).attr("y",function(e){return e.$linePoints[2][1]+7})}},{key:"getMinMarginBetweenNodes",value:function(){return this.config.nodeSize+30}},{key:"getNodeMinX",value:function(e){var t=this;return e&&e.$parent?e.$parent.location.x+t.getMinMarginBetweenNodes():t.config.nodeSize/2}},{key:"getNodeMinY",value:function(e){return this.config.nodeSize/2}},{key:"getNodeMaxX",value:function(e){var t=this;return e&&e.childEdges.length?s.min(e.childEdges,function(e){return e.childNode.$hidden?9999999:e.childNode.location.x})-t.getMinMarginBetweenNodes():9999999}},{key:"setGridWidth",value:function(e,t){var n=this;this.config.gridWidth!==e&&(t||this.data.saveState({data:{gridWidth:n.config.gridWidth},onUndo:function(e){n.setGridWidth(e.gridWidth,!0)},onRedo:function(t){n.setGridWidth(e,!0)}}),this.config.gridWidth=e,this.update())}},{key:"setGridHeight",value:function(e,t){var n=this;this.config.gridHeight!==e&&(t||this.data.saveState({data:{gridHeight:n.config.gridHeight},onUndo:function(e){n.setGridHeight(e.gridHeight,!0)},onRedo:function(t){n.setGridHeight(e,!0)}}),this.config.gridHeight=e,this.update())}},{key:"setNodeSize",value:function(e,t){var n=this;this.config.nodeSize!==e&&(t||this.data.saveState({data:{nodeSize:n.config.nodeSize},onUndo:function(e){n.setNodeSize(e.nodeSize,!0)},onRedo:function(t){n.setNodeSize(e,!0)}}),this.config.nodeSize=e,this.update(),this.isManualLayout()&&(this.fitNodesInPlottingRegion(n.data.getRoots()),this.treeDesigner.redraw(!0)))}},{key:"setEdgeSlantWidthMax",value:function(e,t){var n=this;this.config.edgeSlantWidthMax!==e&&(t||this.data.saveState({data:{edgeSlantWidthMax:n.config.edgeSlantWidthMax},onUndo:function(e){n.setEdgeSlantWidthMax(e.edgeSlantWidthMax,!0)},onRedo:function(t){n.setEdgeSlantWidthMax(e,!0)}}),this.config.edgeSlantWidthMax=e,this.treeDesigner.redraw(!0))}},{key:"autoLayout",value:function(e,t){var n=this;if(t||this.data.saveState({data:{newLayout:e,currentLayout:n.config.type},onUndo:function(e){n.config.type=e.currentLayout,n._fireOnAutoLayoutChangedCallbacks()},onRedo:function(e){n.autoLayout(e.newLayout,!0)}}),this.config.type=e,this.data.nodes.length){var i=n.getNodeMinY();return this.data.getRoots().forEach(function(t){var o=s.hierarchy(t,function(e){return e.childEdges.filter(function(e){return!e.$hidden}).map(function(e){return e.childNode})});o.sort(function(e,t){return e.data.location.y-t.data.location.y});var a;(a="cluster"===e?s.cluster():s.tree()).nodeSize([n.config.gridHeight,n.config.gridWidth]),a.separation(n.nodeSeparation),a(o);var r=999999999;o.each(function(e){r=Math.min(r,e.x)});var l=o.x-r+i,d=n.getNodeMinX(),u=0;o.each(function(e){e.data.location.x=e.y+d,e.data.location.y=e.x+l,u=Math.max(u,e.data.location.y)}),i=u+n.config.nodeSize+n.treeMargin}),this.treeDesigner.redraw(!0),this._fireOnAutoLayoutChangedCallbacks(),this}this._fireOnAutoLayoutChangedCallbacks()}},{key:"fitNodesInPlottingRegion",value:function(e){var t=this,n=s.min(e,function(e){return e.location.y})-t.getNodeMinY(),i=s.min(e,function(e){return e.location.x})-t.getNodeMinX();(n<0||i<0)&&e.forEach(function(e){return e.move(-i,-n)})}},{key:"moveNodes",value:function(t,n,i,o){var a=this,r=a.config.limitNodePositioning;r&&(n<0?t.sort(function(e,t){return e.location.x-t.location.x}):t.sort(function(e,t){return t.location.x-e.location.x}));var l=s.min(t,function(e){return e.location.y});l+i<a.getNodeMinY()&&(i=a.getNodeMinY()-l),t.forEach(function(t){if(r){e.backupNodeLocation(t);var o=a.getNodeMinX(t),l=a.getNodeMaxX(t);t.location.x=Math.min(Math.max(t.location.x+n,o),l),t.location.y+=i}else t.location.x+=n,t.location.y+=i});var d=o&&a.config.limitNodePositioning&&o.location.x===o.$location.x;t.forEach(function(e){d&&(e.location.x=e.$location.x),a.treeDesigner.updateNodePosition(e)})}},{key:"_fireOnAutoLayoutChangedCallbacks",value:function(){var e=this;this.onAutoLayoutChanged.forEach(function(t){return t(e.config.type)})}}],[{key:"backupNodeLocation",value:function(e){e.$location=new l.domain.Point(e.location)}},{key:"setHangingPosition",value:function(e){return c.AppUtils.isHidden(e.node())?e:(e.each(function(){this.getBBox().height;s.select(this).attr("dy","0.75em")}),e)}}]),e}()).MANUAL_LAYOUT_NAME="manual"},{"./app-utils":1,"./d3":8,"./symbols/circle":18,"./symbols/triangle":19,"sd-model":"sd-model","sd-utils":"sd-utils"}],17:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.NodeDragHandler=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("./app-utils"),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./d3")),l=e("./context-menu/context-menu");n.NodeDragHandler=function(){function e(t,n){i(this,e),this.treeDesigner=t,this.data=n;var o=this;this.drag=r.drag().subject(function(e){if(null==e)return{x:event.x,y:event.y};var t=r.select(this);return{x:t.attr("x")+a.AppUtils.getTranslation(t.attr("transform"))[0],y:t.attr("y")+a.AppUtils.getTranslation(t.attr("transform"))[1]}}).on("start",function(e){o.dragStarted.call(this,e,o)}).on("drag",function(e){o.onDrag.call(this,e,o)}).on("end",function(e){o.dragEnded.call(this,e,o)})}return o(e,[{key:"dragStarted",value:function(e,t){if(t.ignoreDrag)return t.ignoreDrag=!1,void(t.ignoredDrag=!0);t.ignoredDrag=!1,l.ContextMenu.hide();var n=r.select(this);n.classed("selected")||t.treeDesigner.clearSelection(),t.treeDesigner.selectNode(e),n.classed("selected dragging",!0),t.selectedNodes=t.treeDesigner.getSelectedNodes(!0),t.prevDragEvent=r.event,t.dragEventCount=0}},{key:"onDrag",value:function(e,t){if(!(t.ignoredDrag||(2==t.dragEventCount&&t.data.saveState(),t.dragEventCount++,t.selectedNodes.length>5&&t.dragEventCount%2!=1))){var n=r.event.x-t.prevDragEvent.x,i=r.event.y-t.prevDragEvent.y;t.treeDesigner.layout.moveNodes(t.selectedNodes,n,i,e),t.prevDragEvent=r.event,t.treeDesigner.redrawEdges(),t.treeDesigner.updatePlottingRegionSize()}}},{key:"dragEnded",value:function(e,t){r.select(this).classed("dragging",!1);t.ignoredDrag||t.treeDesigner.layout.update(e)}},{key:"cancelDrag",value:function(){this.ignoreDrag=!0}}]),e}()},{"./app-utils":1,"./context-menu/context-menu":2,"./d3":8}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=Math.PI;n.default={draw:function(e,t){var n=Math.sqrt(t/i),o=.552284749831*n;e.moveTo(-n,0),e.bezierCurveTo(-n,-o,-o,-n,0,-n),e.bezierCurveTo(o,-n,n,-o,n,0),e.bezierCurveTo(n,o,o,n,0,n),e.bezierCurveTo(-o,n,-n,o,-n,0)}}},{}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});Math.sqrt(3);n.default={draw:function(e,t){var n=Math.sqrt(t/Math.PI);e.moveTo(-n,0),e.lineTo(.9*n,-n),e.lineTo(.9*n,n),e.closePath()}}},{}],20:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Templates=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("sd-utils"),r=e("./i18n/i18n"),l=n.Templates=function(){function e(){i(this,e)}return o(e,null,[{key:"get",value:function(t,n){var i=a.Utils.template(e[t],{imports:{i18n:r.i18n,Templates:e,include:function(t,n){return e.get(t,n)}}});return n?n.variables=n:n={variables:{}},i(n)}},{key:"styleRule",value:function(t,n){var i=t+"{";return n.forEach(function(t){return i+=e.styleProp(t[0],t[1])}),i+="} "}},{key:"styleProp",value:function(e,t){return e+": <%= "+t+" %>; "}},{key:"nodeSelector",value:function(t,n){var i=e.treeDesignerSelector+" .node";return t&&(i+="."+t+"-node"),n&&(i+="."+n),i}},{key:"edgeSelector",value:function(t){var n=e.treeDesignerSelector+" .edge";return t&&(n+="."+t),n}}]),e}();l.growl=e("./templates/growl_message.html"),l.treeDesignerSelector="svg.sd-tree-designer",l.treeDesignerStyles=l.styleRule(l.treeDesignerSelector,[["font-size","fontSize"],["font-family","fontFamily"],["font-weight","fontWeight"],["font-style","fontStyle"]])+l.styleRule(l.nodeSelector()+" path",[["fill","node.fill"],["stroke-width","node.strokeWidth"]])+l.styleRule(l.nodeSelector("decision","optimal")+" path, "+l.nodeSelector("chance","optimal")+" path,"+l.nodeSelector("terminal","optimal")+" path",[["stroke","node.optimal.stroke"],["stroke-width","node.optimal.strokeWidth"]])+l.styleRule(l.nodeSelector()+" .label",[["font-size","node.label.fontSize"],["fill","node.label.color"]])+l.styleRule(l.nodeSelector()+" .payoff",[["font-size","node.payoff.fontSize"],["fill","node.payoff.color"]])+l.styleRule(l.nodeSelector()+" .payoff.negative",[["fill","node.payoff.negativeColor"]])+l.styleRule(l.nodeSelector("decision")+" path",[["fill","node.decision.fill"],["stroke","node.decision.stroke"]])+l.styleRule(l.nodeSelector("decision","selected")+" path",[["fill","node.decision.selected.fill"]])+l.styleRule(l.nodeSelector("chance")+" path",[["fill","node.chance.fill"],["stroke","node.chance.stroke"]])+l.styleRule(l.nodeSelector("chance","selected")+" path",[["fill","node.chance.selected.fill"]])+l.styleRule(l.nodeSelector("terminal")+" path",[["fill","node.terminal.fill"],["stroke","node.terminal.stroke"]])+l.styleRule(l.nodeSelector("terminal","selected")+" path",[["fill","node.terminal.selected.fill"]])+l.styleRule(l.nodeSelector("terminal")+" .aggregated-payoff",[["font-size","node.terminal.payoff.fontSize"],["fill","node.terminal.payoff.color"]])+l.styleRule(l.nodeSelector("terminal")+" .aggregated-payoff.negative",[["fill","node.terminal.payoff.negativeColor"]])+l.styleRule(l.treeDesignerSelector+" .node .probability-to-enter, "+l.treeDesignerSelector+" .edge .probability",[["font-size","probability.fontSize"],["fill","probability.color"]])+l.styleRule(l.edgeSelector()+" path",[["stroke","edge.stroke"],["stroke-width","edge.strokeWidth"]])+l.styleRule(l.treeDesignerSelector+" marker#arrow path",[["fill","edge.stroke"]])+l.styleRule(l.edgeSelector("optimal")+" path",[["stroke","edge.optimal.stroke"],["stroke-width","edge.optimal.strokeWidth"]])+l.styleRule(l.treeDesignerSelector+" marker#arrow-optimal path",[["fill","edge.optimal.stroke"]])+l.styleRule(l.edgeSelector("selected")+" path",[["stroke","edge.selected.stroke"],["stroke-width","edge.selected.strokeWidth"]])+l.styleRule(l.treeDesignerSelector+" marker#arrow-selected path",[["fill","edge.selected.stroke"]])+l.styleRule(l.edgeSelector()+" .label",[["font-size","edge.label.fontSize"],["fill","edge.label.color"]])+l.styleRule(l.edgeSelector()+" .payoff",[["font-size","edge.payoff.fontSize"],["fill","edge.payoff.color"]])+l.styleRule(l.edgeSelector()+" .payoff.negative",[["fill","edge.payoff.negativeColor"]])+l.styleRule(l.treeDesignerSelector+" .sd-title-container text.sd-title",[["font-size","title.fontSize"],["font-weight","title.fontWeight"],["font-style","title.fontStyle"],["fill","title.color"]])+l.styleRule(l.treeDesignerSelector+" .sd-title-container text.sd-description",[["font-size","description.fontSize"],["font-weight","description.fontWeight"],["font-style","description.fontStyle"],["fill","description.color"]])},{"./i18n/i18n":12,"./templates/growl_message.html":21,"sd-utils":"sd-utils"}],21:[function(e,t,n){t.exports='module.exports = "<div class=\\"sd-growl-message <%=type%>\\">\\n    <div class=\\"sd-growl-message-text\\">\\n        <%= message %>\\n    </div>\\n</div>\\n";\n'},{}],22:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.TextDragHandler=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("./app-utils"),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./d3")),l=e("./context-menu/context-menu");n.TextDragHandler=function(){function e(t,n){i(this,e),this.treeDesigner=t,this.data=n;var o=this;this.drag=r.drag().subject(function(e){if(null==e)return{x:event.x,y:event.y};var t=r.select(this);return{x:t.attr("x")+a.AppUtils.getTranslation(t.attr("transform"))[0],y:t.attr("y")+a.AppUtils.getTranslation(t.attr("transform"))[1]}}).on("start",function(e){o.dragStarted.call(this,e,o)}).on("drag",function(e){o.onDrag.call(this,e,o)}).on("end",function(e){o.dragEnded.call(this,e,o)})}return o(e,[{key:"dragStarted",value:function(e,t){l.ContextMenu.hide();var n=r.select(this);n.classed("selected")||t.treeDesigner.clearSelection(),t.treeDesigner.selectText(e),n.classed("selected dragging",!0),t.selectedNodes=t.treeDesigner.getSelectedNodes(),t.prevDragEvent=r.event,t.dragEventCount=0}},{key:"onDrag",value:function(e,t){2==t.dragEventCount&&t.data.saveState(),t.dragEventCount++;var n=r.event.x-t.prevDragEvent.x,i=r.event.y-t.prevDragEvent.y;e.location.move(n,i),t.treeDesigner.updateTextPosition(e),t.prevDragEvent=r.event,t.treeDesigner.updatePlottingRegionSize()}},{key:"dragEnded",value:function(e,t){r.select(this).classed("dragging",!1)}}]),e}()},{"./app-utils":1,"./context-menu/context-menu":2,"./d3":8}],23:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Tooltip=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./d3")),r=e("sd-utils");n.Tooltip=function(){function e(){i(this,e)}return o(e,null,[{key:"getContainer",value:function(){return a.select("body").selectOrAppend("div.sd-tooltip")}},{key:"show",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:28,o=arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=e.getContainer().style("opacity",0);r.transition().duration(200).style("opacity",.98),r.html(t),e.updatePosition(n,i,o),a&&setTimeout(function(){e.hide()},a)}},{key:"updatePosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:28,i=arguments[2];i=i||a.event,e.getContainer().style("left",i.pageX+t+"px").style("top",i.pageY-n+"px")}},{key:"hide",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,n=e.getContainer();t&&(n=n.transition().duration(t)),n.style("opacity",0)}},{key:"attach",value:function(t,n,i,o){t.on("mouseover",function(t,a){var l=null;null!==(l=r.Utils.isFunction(n)?n(t,a):n)&&void 0!==l&&""!==l?e.show(l,i,o):e.hide(0)}).on("mousemove",function(t){e.updatePosition(i,o)}).on("mouseout",function(t){e.hide()})}}]),e}()},{"./d3":8,"sd-utils":"sd-utils"}],24:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.TreeDesigner=n.TreeDesignerConfig=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=i(e("./d3")),s=e("sd-utils"),d=e("./app-utils"),u=e("sd-model"),c=e("./context-menu/context-menu"),f=e("./context-menu/main-context-menu"),h=e("./context-menu/node-context-menu"),p=e("./layout"),g=e("./node-drag-handler"),y=e("./tooltip"),v=e("./templates"),m=e("./text-drag-handler"),b=e("./context-menu/text-context-menu"),x=e("./context-menu/edge-context-menu"),S=i(e("hammerjs")),N=e("./i18n/i18n"),k=n.TreeDesignerConfig=function e(t){a(this,e),this.width=void 0,this.height=void 0,this.margin={left:25,right:25,top:25,bottom:25},this.lng="en",this.layout={type:"tree",nodeSize:40,limitNodePositioning:!0,gridHeight:75,gridWidth:150,edgeSlantWidthMax:20},this.fontFamily="sans-serif",this.fontSize="12px",this.fontWeight="normal",this.fontStyle="normal",this.node={strokeWidth:"1px",optimal:{stroke:"#006f00",strokeWidth:"1.5px"},label:{fontSize:"1em",color:"black"},payoff:{fontSize:"1em",color:"black",negativeColor:"#b60000"},decision:{fill:"#ff7777",stroke:"#660000",selected:{fill:"#aa3333"}},chance:{fill:"#ffff44",stroke:"#666600",selected:{fill:"#aaaa00"}},terminal:{fill:"#44ff44",stroke:"black",selected:{fill:"#00aa00"},payoff:{fontSize:"1em",color:"black",negativeColor:"#b60000"}}},this.edge={stroke:"#424242",strokeWidth:"1.5",optimal:{stroke:"#006f00",strokeWidth:"2.4"},selected:{stroke:"#045ad1",strokeWidth:"3.5"},label:{fontSize:"1em",color:"back"},payoff:{fontSize:"1em",color:"black",negativeColor:"#b60000"}},this.probability={fontSize:"1em",color:"#0000d7"},this.title={fontSize:"16px",fontWeight:"bold",fontStyle:"normal",color:"#000000",margin:{top:15,bottom:10}},this.description={show:!0,fontSize:"12px",fontWeight:"bold",fontStyle:"normal",color:"#000000",margin:{top:5,bottom:10}},this.readOnly=!1,this.disableAnimations=!1,this.forceFullEdgeRedraw=!1,this.hideLabels=!1,this.hidePayoffs=!1,this.hideProbabilities=!1,this.raw=!1,this.payoffNumberFormatter=function(e,t){return e},this.probabilityNumberFormatter=function(e){return e},this.onNodeSelected=function(e){},this.onEdgeSelected=function(e){},this.onTextSelected=function(e){},this.onSelectionCleared=function(){},this.operationsForObject=function(e){return[]},this.payoffNames=[null,null],this.maxPayoffsToDisplay=1,t&&s.Utils.deepExtend(this,t)};n.TreeDesigner=function(){function e(t,n,i){a(this,e),this.setConfig(i),this.data=n,this.initContainer(t),this.init()}return r(e,[{key:"setConfig",value:function(e){return this.config=new k(e),this.layout&&(this.layout.config=this.config.layout),this.updateCustomStyles(),this}},{key:"init",value:function(){this.initSvg(),this.initLayout(),this.initI18n(),this.initBrush(),this.initEdgeMarkers(),this.updateCustomStyles(),this.config.readOnly||(this.initMainContextMenu(),this.initNodeContextMenu(),this.initEdgeContextMenu(),this.initNodeDragHandler(),this.initTextDragHandler(),this.initTextContextMenu()),this.redraw()}},{key:"initI18n",value:function(){N.i18n.init(this.config.lng)}},{key:"updateCustomStyles",value:function(){return l.select("head").selectOrAppend("style#sd-tree-designer-style").html(v.Templates.get("treeDesignerStyles",this.config)),this}},{key:"initLayout",value:function(){this.layout=new p.Layout(this,this.data,this.config.layout)}},{key:"initNodeDragHandler",value:function(){this.nodeDragHandler=new g.NodeDragHandler(this,this.data)}},{key:"initTextDragHandler",value:function(){this.textDragHandler=new m.TextDragHandler(this,this.data)}},{key:"redraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;return e=!t.config.disableAnimations&&e,this.redrawDiagramTitle(),this.redrawDiagramDescription(),this.updateMargin(e),e&&(t.transitionPrev=t.transition,t.transition=!0),this.redrawNodes(),this.redrawEdges(),this.redrawFloatingTexts(),this.updateValidationMessages(),e&&(t.transition=t.transitionPrev),setTimeout(function(){t.updatePlottingRegionSize()},10),this}},{key:"computeAvailableSpace",value:function(){this.availableHeight=d.AppUtils.sanitizeHeight(this.config.height,this.container,this.config.margin),this.availableWidth=d.AppUtils.sanitizeWidth(this.config.width,this.container,this.config.margin)}},{key:"initSvg",value:function(){var e=this;this.computeAvailableSpace(),this.svg=this.container.selectOrAppend("svg.sd-tree-designer"),this.svg.attr("width",this.availableWidth).attr("height",this.availableHeight),this.mainGroup=this.svg.selectOrAppend("g.main-group"),this.updateMargin(),this.config.width||l.select(window).on("resize.tree-designer",function(){e.updatePlottingRegionSize(),e.redrawDiagramTitle()});var t=new S.Manager(this.svg.node(),{touchAction:"auto"});t.add(new S.Press({pointerType:"touch"})),t.add(new S.Pinch({pointerType:"touch"}));var n;t.on("pinchstart",function(){e.disableBrush()}),t.on("pinch",function(){n=s.Utils.waitForFinalEvent(function(){return e.enableBrush()},"pinchend",5e3)})}},{key:"updateMargin",value:function(e){var t=this,n=this.config.margin,i=this.mainGroup;e&&(i=i.transition()),this.topMargin=n.top,(this.diagramTitle||this.diagramDescription)&&(this.topMargin=parseInt(this.diagramTitle?this.config.title.margin.top:0)+this.getTitleGroupHeight()+Math.max(this.topMargin,parseInt(this.config.title.margin.bottom))),i.attr("transform","translate("+n.left+","+this.topMargin+")").on("end",function(){return t.updatePlottingRegionSize()})}},{key:"setMargin",value:function(e,t){var n=this;t||this.data.saveState({data:{margin:s.Utils.clone(n.config.margin)},onUndo:function(e){n.setMargin(e.margin,!0)},onRedo:function(t){n.setMargin(e,!0)}}),s.Utils.deepExtend(this.config.margin,e),this.redrawDiagramTitle(),this.updateMargin(!0)}},{key:"initContainer",value:function(e){if(s.Utils.isString(e)){var t=e.trim();s.Utils.startsWith(t,"#")||s.Utils.startsWith(t,".")||(t="#"+t),this.container=l.select(t)}else e._parents?this.container=e:this.container=l.select(e)}},{key:"updatePlottingRegionSize",value:function(){var e=!1;this.computeAvailableSpace();var t=this.config.margin,n=this.svg.attr("width"),i=this.svg.attr("height"),o=this.mainGroup.node().getBBox(),a=o.width+o.x+t.left+t.right;this.container.classed("with-overflow-x",a>=this.availableWidth),n!=(a=Math.max(a,this.availableWidth))&&(e=!0,this.svg.attr("width",a));var r=o.height+o.y+this.topMargin+t.bottom;this.container.classed("with-overflow-y",r>=this.availableHeight),i!=(r=Math.max(r,this.availableHeight))&&(e=!0,this.svg.attr("height",r)),e&&this.updateBrushExtent()}},{key:"redrawNodes",value:function(){var e=this,t=this.mainGroup.selectOrAppend("g.nodes").selectAll(".node").data(this.data.nodes.filter(function(e){return!e.$hidden}),function(e,t){return e.$id});t.exit().remove();var n=t.enter().append("g").attr("id",function(e){return"node-"+e.$id}).attr("class",function(e){return e.type+"-node node"}).attr("transform",function(e){return"translate("+e.location.x+"  "+e.location.y+")"});n.append("path");var i=n.append("text").attr("class","label"),o=n.append("text").attr("class","payoff computed"),a=n.append("text").attr("class","error-indicator").text("!!"),r=n.append("text").attr("class","aggregated-payoff"),d=n.append("text").attr("class","probability-to-enter"),u=n.merge(t);u.classed("optimal",function(t){return e.isOptimal(t)});var c=u;this.transition&&(c=u.transition()).on("end",function(){return e.updatePlottingRegionSize()}),c.attr("transform",function(e){return"translate("+e.location.x+"  "+e.location.y+")"});var f=u.select("path");this.layout.drawNodeSymbol(f,this.transition),this.layout.nodeLabelPosition(i),u.select("text.label").classed("sd-hidden",this.config.hideLabels);var h=c.select("text.label");h.each(this.updateTextLines),this.layout.nodeLabelPosition(h).attr("text-anchor","middle");var p=u.select("text.payoff"),g=p.selectAll("tspan").data(function(e){var t=e.displayValue("childrenPayoff");return s.Utils.isArray(t)?t.filter(function(e){return void 0!==e}):[t]});g.exit().remove();var v=g.enter().append("tspan").merge(g);v.attr("dy",function(e,t){return t>0?"1.1em":void 0}).attr("x","0").classed("negative",function(e){return null!==e&&e<0}).classed("sd-hidden",this.config.hidePayoffs||this.config.raw).text(function(t,n){var i=t;return null!==i?isNaN(i)?i:e.config.payoffNumberFormatter(i,n):""}),this.attachPayoffTooltip(v);var m=p;this.transition&&(m=p.transition()),this.layout.nodePayoffPosition(o),this.layout.nodePayoffPosition(m);var b=u.select("text.aggregated-payoff"),x=b.selectAll("tspan").data(function(e){var t=e.displayValue("aggregatedPayoff");return s.Utils.isArray(t)?t.filter(function(e){return void 0!==e}):[t]});x.exit().remove();var k=x.enter().append("tspan").merge(x).attr("dy",function(e,t){return t>0?"0.95em":void 0}).classed("negative",function(e){return null!==e&&e<0}).classed("sd-hidden",this.config.hidePayoffs||this.config.raw).text(function(t,n){return null!==t?isNaN(t)?t:e.config.payoffNumberFormatter(t,n):""});this.attachPayoffTooltip(k,"aggregatedPayoff");var w=b;this.transition&&(w=b.transition()),this.layout.nodeAggregatedPayoffPosition(r),this.layout.nodeAggregatedPayoffPosition(w);var P=u.select("text.probability-to-enter").text(function(t){var n=t.displayValue("probabilityToEnter");return null!==n?isNaN(n)?n:e.config.probabilityNumberFormatter(n):""}).classed("sd-hidden",this.config.hideProbabilities||this.config.raw);y.Tooltip.attach(P,N.i18n.t("tooltip.node.probabilityToEnter"));var M=P;this.transition&&(M=P.transition()),this.layout.nodeProbabilityToEnterPosition(d),this.layout.nodeProbabilityToEnterPosition(M);var T=u.select("text.error-indicator");T.classed("sd-hidden",this.config.raw),this.layout.nodeIndicatorPosition(a),this.layout.nodeIndicatorPosition(T),this.nodeDragHandler&&u.call(this.nodeDragHandler.drag),u.on("contextmenu",this.nodeContextMenu),u.on("dblclick",this.nodeContextMenu),u.each(function(t,n){var i=this,o=new S.Manager(i);if(o.add(new S.Press({pointerType:"touch"})),o.on("press",function(t){"touch"==t.pointerType&&e.nodeDragHandler.cancelDrag()}),t.folded){var a=l.select(i).selectOrAppend("text.sd-unfold-button").text("[+]").on("click dbclick mousedown",function(){return e.foldSubtree(t,!1)});e.layout.nodeUnfoldButtonPosition(a),y.Tooltip.attach(a,N.i18n.t("contextMenu.node.unfold"))}else l.select(i).select(".sd-unfold-button").remove()})}},{key:"attachPayoffTooltip",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"payoff",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"node",i=this;y.Tooltip.attach(e,function(e,o){return i.config.payoffNames.length>o&&null!==i.config.payoffNames[o]?N.i18n.t("tooltip."+n+"."+t+".named",{value:e.payoff,number:o+1,name:i.config.payoffNames[o]}):N.i18n.t("tooltip."+n+"."+t+".default",{value:e.payoff,number:i.config.maxPayoffsToDisplay<2?"":o+1})})}},{key:"updateTextLines",value:function(e){var t=e.name?e.name.split("\n"):[];t.reverse();var n=l.select(this).selectAll("tspan").data(t);n.enter().append("tspan").merge(n).text(function(e){return e}).attr("dy",function(e,t){return t>0?"-1.1em":void 0}).attr("x","0"),n.exit().remove()}},{key:"isOptimal",value:function(e){return e.displayValue("optimal")}},{key:"redrawEdges",value:function(){var e=this,t=this,n=this.mainGroup.selectOrAppend("g.edges");t.config.forceFullEdgeRedraw&&n.selectAll("*").remove();var i=n.selectAll(".edge").data(this.data.edges.filter(function(e){return!e.$hidden}),function(e,t){return e.$id});i.exit().remove();var o=i.enter().append("g").attr("id",function(e){return"edge-"+e.$id}).attr("class","edge");o.append("path");var a=o.appendSelector("g.label-group");a.append("text").attr("class","label");var r=o.append("text").attr("class","payoff"),d=o.append("text").attr("class","probability"),u=o.merge(i);u.classed("optimal",function(e){return t.isOptimal(e)});var c=u;this.transition&&(c=u.transition()),c.select("path").attr("d",function(t){return e.layout.edgeLineD(t)}).attr("fill","none").attr("marker-end",function(e){return"url(#arrow"+(l.select(this.parentNode).classed("selected")?"-selected":t.isOptimal(e)?"-optimal":"")+")"}),u.on("click",function(e){t.selectEdge(e,!0)}),this.layout.edgeLabelPosition(a),c.select("text.label").each(this.updateTextLines),u.select("g.label-group").classed("sd-hidden",this.config.hideLabels);var f=c.select("g.label-group");this.layout.edgeLabelPosition(f);var h=u.select("text.payoff"),p=h.selectAll("tspan").data(function(e){var n=e.displayValue("payoff");return s.Utils.isArray(n)?n.slice(0,Math.min(n.length,t.config.maxPayoffsToDisplay)).map(function(t){return e}):[e]});p.exit().remove();var g=p.enter().append("tspan").merge(p);g.attr("dy",function(e,t){return t>0?"1.1em":void 0}).classed("negative",function(e,t){var n=e.displayPayoff(void 0,t);return null!==n&&n<0}).classed("sd-hidden",this.config.hidePayoffs).text(function(n,i){if(e.config.raw)return n.payoff[i];var o=n.displayValue("payoff"),a=(s.Utils.isArray(o)?o:[o])[i];if(null!==a){if(!isNaN(a))return t.config.payoffNumberFormatter(a,i);if(s.Utils.isString(a))return a}return null===n.payoff[i]||isNaN(n.payoff[i])?n.payoff[i]:t.config.payoffNumberFormatter(n.payoff[i],i)}),y.Tooltip.attach(g,function(e,n){return t.config.payoffNames.length>n&&null!==t.config.payoffNames[n]?N.i18n.t("tooltip.edge.payoff.named",{value:e.payoff[n],number:n+1,name:t.config.payoffNames[n]}):N.i18n.t("tooltip.edge.payoff.default",{value:e.payoff[n],number:t.config.maxPayoffsToDisplay<2?"":n+1})});var v=h;this.transition&&(v=h.transition()),this.layout.edgePayoffPosition(r),this.layout.edgePayoffPosition(v),y.Tooltip.attach(u.select("text.probability"),function(e){return N.i18n.t("tooltip.edge.probability",{value:void 0===e.probability?e.displayProbability():e.probability})}),u.select("text.probability").classed("sd-hidden",this.config.hideProbabilities);var m=u.select("text.probability");m.attr("text-anchor","end").text(function(n){if(e.config.raw)return n.probability;var i=n.displayProbability();if(null!==i){if(!isNaN(i))return t.config.probabilityNumberFormatter(i);if(s.Utils.isString(i))return i}return null===n.probability||isNaN(n.probability)?n.probability:t.config.probabilityNumberFormatter(n.probability)});var b=m;this.transition&&(b=m.transition()),this.layout.edgeProbabilityPosition(d),this.layout.edgeProbabilityPosition(b),n.selectAll(".edge.optimal").raise(),u.on("contextmenu",this.edgeContextMenu),u.on("dblclick",this.edgeContextMenu),u.each(function(e,t){var n=this;new S.Manager(n).add(new S.Press({pointerType:S.POINTER_TOUCH}))})}},{key:"redrawFloatingTexts",value:function(){var e=this.mainGroup.selectOrAppend("g.floating-texts").selectAll(".floating-text").data(this.data.texts,function(e,t){return e.$id});e.exit().remove();var t=e.enter().appendSelector("g.floating-text").attr("id",function(e){return"text-"+e.$id});t.append("rect").attr("x",-5).attr("y",-16).attr("fill-opacity",0),t.append("text");var n=t.merge(e),i=n;this.transition&&(i=n.transition()),i.attr("transform",function(e){return"translate("+e.location.x+"  "+e.location.y+")"});var o=n.select("text").selectAll("tspan").data(function(e){return e.value?e.value.split("\n"):[]});o.enter().append("tspan").merge(o).html(function(e){return d.AppUtils.replaceUrls(d.AppUtils.escapeHtml(e))}).attr("dy",function(e,t){return t>0?"1.1em":void 0}).attr("x","0"),o.exit().remove(),n.classed("sd-empty",function(e){return!e.value||!e.value.trim()}),n.select("rect").attr("width",40).attr("height",20),n.each(function(e){if(e.value){var t=l.select(this).select("text").node().getBBox();l.select(this).select("rect").attr("y",t.y-5).attr("width",Math.max(t.width+10,40)).attr("height",Math.max(t.height+10,20))}}),this.textDragHandler&&n.call(this.textDragHandler.drag),n.on("contextmenu",this.textContextMenu),n.on("dblclick",this.textContextMenu),n.each(function(e,t){var n=this;new S.Manager(n).add(new S.Press({pointerType:"touch"}))})}},{key:"updateValidationMessages",value:function(){var e=this;this.mainGroup.selectAll(".node").classed("error",!1),this.data.validationResults.forEach(function(t){t.isValid()||Object.getOwnPropertyNames(t.objectIdToError).forEach(function(n){var i=t.objectIdToError[n],o=e.getNodeD3SelectionById(n);o.classed("error",!0);var a="";i.forEach(function(e){a&&(a+="<br/>"),a+=d.AppUtils.getValidationMessage(e)}),y.Tooltip.attach(o.select(".error-indicator"),a)})})}},{key:"initEdgeMarkers",value:function(){this.svg.append("svg:defs");this.initArrowMarker("arrow"),this.initArrowMarker("arrow-optimal"),this.initArrowMarker("arrow-selected")}},{key:"initArrowMarker",value:function(e){this.svg.select("defs").append("marker").attr("id",e).attr("viewBox","0 -5 10 10").attr("refX",5).attr("refY",0).attr("markerWidth",4).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("class","arrowHead")}},{key:"updateBrushExtent",value:function(){var e=this;this.brush.extent([[0,0],[e.svg.attr("width"),e.svg.attr("height")]]),this.brushContainer.call(this.brush)}},{key:"initBrush",value:function(){var e=this,t=e.brushContainer=this.brushContainer=this.svg.selectOrInsert("g.brush",":first-child").attr("class","brush"),n=this.brush=l.brush().on("start",function(){l.event.selection&&(e.hoveredEdge?e.selectEdge(e.hoveredEdge.datum(),!0):e.clearSelection(),c.ContextMenu.hide())}).on("brush",function(){var t=l.event.selection;t&&e.mainGroup.selectAll(".node").classed("selected",function(n){var i=e.getMainGroupTranslation(),o=n.location.x+i[0],a=n.location.y+i[1],r=.25*e.config.layout.nodeSize;return t[0][0]<=o+r&&o-r<=t[1][0]&&t[0][1]<=a+r&&a-r<=t[1][1]})}).on("end",function(){if(l.event.selection){n.move(t,null);var i=e.getSelectedNodes();i&&1===i.length&&e.selectNode(i[0])}});this.updateBrushExtent(),t.select(".overlay").on("mousemove.edgeSelection",function(){var t=l.mouse(this),n=e.getMainGroupTranslation(),i=[null,999999999];e.mainGroup.selectAll(".edge").each(function(e){var o=l.select(this);o.classed("sd-hover",!1);var a=o.select("path").node(),r=a.getBBox();if(r.x+n[0]<=t[0]&&r.x+r.width+n[0]>=t[0]&&r.y+n[1]-10<=t[1]&&r.y+r.height+n[1]+10>=t[1]){var s=d.AppUtils.closestPoint(a,[t[0]-n[0],t[1]-n[1]]);s.distance<10&&s.distance<i[1]&&(i=[o,s.distance])}}),e.hoveredEdge=null,i[0]&&(i[0].classed("sd-hover",!0),e.hoveredEdge=i[0])})}},{key:"disableBrush",value:function(){this.brushDisabled||d.AppUtils.growl(N.i18n.t("growl.brushDisabled"),"info","left"),this.brushDisabled=!0,this.brushContainer.remove()}},{key:"enableBrush",value:function(){this.brushDisabled&&(d.AppUtils.growl(N.i18n.t("growl.brushEnabled"),"info","left"),this.initBrush(),this.brushDisabled=!1)}},{key:"getMainGroupTranslation",value:function(e){var t=d.AppUtils.getTranslation(this.mainGroup.attr("transform"));return e&&(t[0]=-t[0],t[1]=-t[1]),t}},{key:"initNodeContextMenu",value:function(){this.nodeContextMenu=new h.NodeContextMenu(this,this.config.operationsForObject)}},{key:"initEdgeContextMenu",value:function(){this.edgeContextMenu=new x.EdgeContextMenu(this)}},{key:"initTextContextMenu",value:function(){this.textContextMenu=new b.TextContextMenu(this)}},{key:"initMainContextMenu",value:function(){this.mainContextMenu=new f.MainContextMenu(this),this.svg.on("contextmenu",this.mainContextMenu),this.svg.on("dblclick",this.mainContextMenu)}},{key:"addText",value:function(e){this.data.saveState(),this.data.addText(e),this.redraw(),this.selectText(e)}},{key:"addNode",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.data.saveState(),this.data.addNode(e,t),this.redraw(!0),this.layout.update(e),e}},{key:"addDecisionNode",value:function(e){var t=new u.domain.DecisionNode(this.layout.getNewChildLocation(e));this.addNode(t,e)}},{key:"addChanceNode",value:function(e){var t=new u.domain.ChanceNode(this.layout.getNewChildLocation(e));this.addNode(t,e)}},{key:"addTerminalNode",value:function(e){var t=new u.domain.TerminalNode(this.layout.getNewChildLocation(e));this.addNode(t,e)}},{key:"injectNode",value:function(e,t){return this.data.saveState(),this.data.injectNode(e,t),this.redraw(),this.layout.update(e),e}},{key:"injectDecisionNode",value:function(e){var t=new u.domain.DecisionNode(this.layout.getInjectedNodeLocation(e));this.injectNode(t,e)}},{key:"injectChanceNode",value:function(e){var t=new u.domain.ChanceNode(this.layout.getInjectedNodeLocation(e));this.injectNode(t,e)}},{key:"removeNode",value:function(e){this.data.saveState(),this.data.removeNode(e),this.layout.isManualLayout()?this.redraw():this.layout.update()}},{key:"removeSelectedNodes",value:function(){var e=this.getSelectedNodes();e.length&&(this.data.saveState(),this.data.removeNodes(e),this.clearSelection(),this.redraw(),this.layout.update())}},{key:"removeSelectedTexts",value:function(){var e=this.getSelectedTexts();e.length&&(this.data.saveState(),this.data.removeTexts(e),this.clearSelection(),this.redraw())}},{key:"copyNode",value:function(e,t){var n=this.data.cloneSubtree(e);t?(this.copiedNodes||(this.copiedNodes=[]),this.copiedNodes.push(n)):this.copiedNodes=[n]}},{key:"cutNode",value:function(e){this.copyNode(e),this.removeNode(e)}},{key:"cutSelectedNodes",value:function(){var e=this.getSelectedNodes(),t=this.data.findSubtreeRoots(e);this.copyNodes(t),this.removeSelectedNodes()}},{key:"copySelectedNodes",value:function(){var e=this.getSelectedNodes(),t=this.data.findSubtreeRoots(e);this.copyNodes(t)}},{key:"copyNodes",value:function(e){var t=this;this.copiedNodes=e.map(function(e){return t.data.cloneSubtree(e)})}},{key:"pasteToNode",value:function(e){var t=this;if(this.copiedNodes&&this.copiedNodes.length){this.data.saveState();var n=this;n.clearSelection();var i=this.copiedNodes;n.copyNodes(this.copiedNodes),i.forEach(function(o){var a=t.data.attachSubtree(o,e).childNode;a.folded&&n.foldSubtree(a,a.folded,!1);var r=n.layout.getNewChildLocation(e);a.moveTo(r.x,r.y,!0),n.layout.moveNodeToEmptyPlace(a,!1),n.layout.fitNodesInPlottingRegion(t.data.getAllDescendantNodes(a)),n.selectSubTree(a,!1,i.length>1)}),e.folded&&n.foldSubtree(e,e.folded,!1),setTimeout(function(){n.redraw(),n.layout.update()},10)}}},{key:"pasteToNewLocation",value:function(e){var t=this;this.data.saveState();var n=this;n.clearSelection();var i=this.copiedNodes;n.copyNodes(this.copiedNodes),i.forEach(function(o){var a=t.data.attachSubtree(o);a.folded&&n.foldSubtree(a,a.folded,!1),a.moveTo(e.x,e.y,!0),n.layout.moveNodeToEmptyPlace(a,!1),n.layout.fitNodesInPlottingRegion(t.data.getAllDescendantNodes(a)),n.selectSubTree(a,!1,i.length>1)}),setTimeout(function(){n.redraw(),n.layout.update()},10)}},{key:"convertNode",value:function(e,t){var n=this;this.data.saveState(),this.data.convertNode(e,t),setTimeout(function(){n.redraw(!0)},10)}},{key:"performOperation",value:function(e,t){var n=this;this.data.saveState(),t.perform(e),setTimeout(function(){n.redraw(),n.layout.update()},10)}},{key:"foldSubtree",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this;e.folded=t,this.data.getAllDescendantNodes(e).forEach(function(e){e.$hidden=t,e.folded=!1}),this.data.getAllDescendantEdges(e).forEach(function(e){return e.$hidden=t}),n&&setTimeout(function(){i.redraw(),i.layout.update()},10)}},{key:"updateVisibility",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t?t.folded?this.foldSubtree(t,!0,!1):t.childEdges.forEach(function(t){return e.updateVisibility(t.childNode)}):this.data.getRoots().forEach(function(t){return e.updateVisibility(t)})}},{key:"moveNodeTo",value:function(e,t){}},{key:"updateNodePosition",value:function(e){this.getNodeD3Selection(e).raise().attr("transform","translate("+e.location.x+" "+e.location.y+")")}},{key:"updateTextPosition",value:function(e){this.getTextD3Selection(e).raise().attr("transform","translate("+e.location.x+" "+e.location.y+")")}},{key:"getNodeD3Selection",value:function(e){return this.getNodeD3SelectionById(e.$id)}},{key:"getNodeD3SelectionById",value:function(e){return this.mainGroup.select("#node-"+e)}},{key:"getTextD3Selection",value:function(e){return this.getTextD3SelectionById(e.$id)}},{key:"getTextD3SelectionById",value:function(e){return this.mainGroup.select("#text-"+e)}},{key:"getSelectedNodes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.mainGroup.selectAll(".node.selected").data();if(t)return n;var i=[];return i.push.apply(i,o(n)),n.forEach(function(t){if(t.folded){var n=e.data.getAllDescendantNodes(t);n&&i.push.apply(i,o(n))}}),i}},{key:"getSelectedTexts",value:function(){return this.mainGroup.selectAll(".floating-text.selected").data()}},{key:"clearSelection",value:function(){var e=this;this.mainGroup.selectAll(".edge.selected").select("path").attr("marker-end",function(t){return"url(#arrow"+(e.isOptimal(t)?"-optimal":"")+")"}),this.mainGroup.selectAll(".selected").classed("selected",!1),this.config.onSelectionCleared()}},{key:"selectEdge",value:function(e,t){t&&this.clearSelection(),this.config.onEdgeSelected(e),this.mainGroup.select("#edge-"+e.$id).classed("selected",!0).select("path").attr("marker-end",function(e){return"url(#arrow-selected)"})}},{key:"isNodeSelected",value:function(e){return this.getNodeD3Selection(e).classed("selected")}},{key:"selectNode",value:function(e,t,n){t&&this.clearSelection(),n||this.config.onNodeSelected(e),this.getNodeD3SelectionById(e.$id).classed("selected",!0)}},{key:"selectText",value:function(e,t,n){t&&this.clearSelection(),n||this.config.onTextSelected(e),this.getTextD3SelectionById(e.$id).classed("selected",!0)}},{key:"selectSubTree",value:function(e,t,n){var i=this;t&&this.clearSelection(),this.selectNode(e,!1,n),e.childEdges.forEach(function(e){return i.selectSubTree(e.childNode,!1,!0)})}},{key:"selectAllNodes",value:function(){this.mainGroup.selectAll(".node").classed("selected",!0)}},{key:"autoLayout",value:function(e,t){this.layout.autoLayout(e,t)}},{key:"updateDiagramTitle",value:function(e){e||(e=""),this.diagramTitle=e,this.redrawDiagramTitle(),this.redrawDiagramDescription(),this.updateMargin(!0)}},{key:"redrawDiagramTitle",value:function(){var e=this.svg.attr("width");this.svg.attr("height");this.titleContainer=this.svg.selectOrAppend("g.sd-title-container");var t=this.titleContainer.selectOrAppend("text.sd-title");t.text(this.diagramTitle),p.Layout.setHangingPosition(t);var n=parseInt(this.config.title.margin.top);this.titleContainer.attr("transform","translate("+e/2+","+n+")")}},{key:"redrawDiagramDescription",value:function(){this.svg.attr("width"),this.svg.attr("height");this.titleContainer=this.svg.selectOrAppend("g.sd-title-container");var e=this.titleContainer.selectOrAppend("text.sd-description");if(this.config.description.show){var t=this.diagramDescription?this.diagramDescription.split("\n"):[],n=e.selectAll("tspan").data(t);n.enter().append("tspan").merge(n).html(function(e){return d.AppUtils.replaceUrls(d.AppUtils.escapeHtml(e))}).attr("dy",function(e,t){return t>0?"1.1em":void 0}).attr("x","0"),n.exit().remove(),p.Layout.setHangingPosition(e);var i=this.titleContainer.selectOrAppend("text.sd-title"),o=0;this.diagramTitle&&(o+=i.node().getBBox().height,o+=Math.max(parseInt(this.config.description.margin.top),0)),e.attr("transform","translate(0,"+o+")")}else e.remove()}},{key:"updateDiagramDescription",value:function(e){e||(e=""),this.diagramDescription=e,this.redrawDiagramTitle(),this.redrawDiagramDescription(),this.updateMargin(!0)}},{key:"getTitleGroupHeight",value:function(e){if(!this.titleContainer)return 0;var t=this.titleContainer.node().getBBox().height;return e&&(t+=parseInt(this.config.title.margin.bottom),t+=parseInt(this.config.title.margin.top)),t}}]),e}()},{"./app-utils":1,"./context-menu/context-menu":2,"./context-menu/edge-context-menu":3,"./context-menu/main-context-menu":4,"./context-menu/node-context-menu":5,"./context-menu/text-context-menu":6,"./d3":8,"./i18n/i18n":12,"./layout":16,"./node-drag-handler":17,"./templates":20,"./text-drag-handler":22,"./tooltip":23,hammerjs:"hammerjs","sd-model":"sd-model","sd-utils":"sd-utils"}],"sd-tree-designer":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./src/index");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})})},{"./src/index":15}]},{},[]);
//# sourceMappingURL=sd-tree-designer.min.js.map
